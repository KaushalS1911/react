import{K as w,r,d as U,D as T,j as e,F as E,S as i,E as n,O as L,U as M,V as B,W as P,X as R,T as l,Y as V,B as G,Q as N,N as A,G as p,H as W}from"./index-MKkVIcob.js";import{u as z,a as u,L as H,b as O}from"./index-r7EwSfXF.js";import{L as Y,F as K}from"./rhf-text-field-hrfOLSRX.js";function Q(){const x=w(),[h,g]=r.useState(""),[c,d]=r.useState([]),j=()=>p.success("Document uploaded successfully"),b=()=>p.error("Something went wrong."),f=r.useMemo(()=>({doc_type:"",vendor_code:""}),[]),a=U({defaultValues:f}),{handleSubmit:y,control:C}=a,k=sessionStorage.getItem("vendor");r.useEffect(()=>{g(k||"")},[]);const m=y(async s=>{const t=new FormData;t.append("doc_type",s.doc_type),t.append("vendor_code",h),c.forEach(o=>{t.append("file",o)});try{const o=await T.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/upload_document",t,{headers:{"Content-Type":"multipart/form-data"}});o.data.status=="201"?j():b(),console.log("Form submitted successfully:",o.data)}catch(o){console.error("Error submitting form:",o)}}),v=[{label:"Aadhar",key:"aadhar"},{label:"Certificates",key:"certificates"},{label:"Gst Number",key:"gst_number"},{label:"Milling Unit Photo",key:"milling_unit_photo"},{label:"Milling Unit Video",key:"milling_unit_video"},{label:"Pan Number",key:"pan_number"}],S=r.useCallback(s=>{d(t=>[...t,...s])},[]),D=s=>{d(t=>t.filter(o=>o.name!==s))},{getRootProps:F,getInputProps:_}=z({onDrop:S,accept:"image/*,application/pdf"}),I=e.jsx(e.Fragment,{children:e.jsx(E,{children:e.jsx(i,{spacing:3,sx:{p:3},children:e.jsxs(i,{spacing:1.5,children:[e.jsx(n,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)"},children:e.jsx(L,{name:"doc_type",control:C,render:({field:s})=>e.jsxs(M,{fullWidth:!0,children:[e.jsx(B,{children:"Document Type"}),e.jsx(P,{...s,label:"Document Type",children:v.map(t=>e.jsx(R,{value:t.key,children:t.label},t))})]})})}),e.jsx(l,{variant:"subtitle2",children:"Upload Your Document"}),e.jsxs(n,{...F(),sx:{border:"2px dashed #CCCCCC",borderRadius:"5px",padding:"16px",textAlign:"center",cursor:"pointer"},children:[e.jsx("input",{..._(),name:"file"}),e.jsx(n,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{width:"350px"},children:e.jsx("img",{src:u,alt:u})})}),e.jsx(V,{children:c.map(s=>e.jsx(H,{sx:{mt:"10px"},secondaryAction:e.jsx(G,{sx:{border:"2px solid #000",backgroundColor:"black",color:"white","&:hover":{border:"2px solid #000",backgroundColor:"white",color:"black"}},onClick:()=>D(s.name),children:"Remove"}),children:e.jsx(O,{primary:s.name})},s.name))})]}),e.jsx(i,{alignItems:"flex-end",sx:{mt:3},children:e.jsx(Y,{type:"submit",className:"button",loading:a.formState.isSubmitting,onClick:m,children:"Save"})})]})})})});return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsxs(A,{maxWidth:x.themeStretch?!1:"xl",children:[e.jsx(l,{variant:"h4",children:"Upload Files"}),e.jsx(n,{sx:{mt:5,width:1,height:320,borderRadius:2},children:e.jsx(K,{methods:a,onSubmit:m,children:I})})]})]})}function Z(){return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx("title",{children:" Dashboard: Upload Documents"})}),e.jsx(Q,{})]})}export{Z as default};
