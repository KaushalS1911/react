import{ab as U,r,d as w,a6 as T,j as e,a9 as L,S as i,a8 as o,a3 as M,ah as B,ai as E,aj as P,ak as R,T as l,al as V,B as A,a7 as G,ac as N,aa as p,H as O}from"./index-34CRokHM.js";import{u as z,a as u,L as H,b as W}from"./index-LMjyqUcl.js";import{L as Q,F as Y}from"./rhf-text-field-9QmEwnpk.js";function q(){const x=U(),[h,j]=r.useState(""),[c,d]=r.useState([]),g=()=>p.success("Order created"),b=()=>p.error("Order not created"),f=r.useMemo(()=>({doc_type:"",vendor_code:""}),[]),n=w({defaultValues:f}),{handleSubmit:y,control:C}=n,k=sessionStorage.getItem("vendor");r.useEffect(()=>{j(k||"")},[]);const m=y(async s=>{const t=new FormData;t.append("doc_type",s.doc_type),t.append("vendor_code",h),c.forEach(a=>{t.append("file",a)});try{const a=await T.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/upload_document",t,{headers:{"Content-Type":"multipart/form-data"}});a.data.status=="201"?g():b(),console.log("Form submitted successfully:",a.data)}catch(a){console.error("Error submitting form:",a)}}),v=[{label:"Aadhar",key:"aadhar"},{label:"Certificates",key:"certificates"},{label:"Gst Number",key:"gst_number"},{label:"Milling Unit Photo",key:"milling_unit_photo"},{label:"Milling Unit Video",key:"milling_unit_video"},{label:"Pan Number",key:"pan_number"}],S=r.useCallback(s=>{d(t=>[...t,...s])},[]),_=s=>{d(t=>t.filter(a=>a.name!==s))},{getRootProps:F,getInputProps:D}=z({onDrop:S,accept:"image/*,application/pdf"}),I=e.jsx(e.Fragment,{children:e.jsx(L,{children:e.jsx(i,{spacing:3,sx:{p:3},children:e.jsxs(i,{spacing:1.5,children:[e.jsx(o,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)"},children:e.jsx(M,{name:"doc_type",control:C,render:({field:s})=>e.jsxs(B,{fullWidth:!0,children:[e.jsx(E,{children:"Document Type"}),e.jsx(P,{...s,label:"Document Type",children:v.map(t=>e.jsx(R,{value:t.key,children:t.label},t))})]})})}),e.jsx(l,{variant:"subtitle2",children:"Upload Your Document"}),e.jsxs(o,{...F(),sx:{border:"2px dashed #CCCCCC",borderRadius:"5px",padding:"16px",textAlign:"center",cursor:"pointer"},children:[e.jsx("input",{...D(),name:"file"}),e.jsx(o,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{width:"350px"},children:e.jsx("img",{src:u,alt:u})})}),e.jsx(V,{children:c.map(s=>e.jsx(H,{sx:{mt:"10px"},secondaryAction:e.jsx(A,{sx:{border:"2px solid #000",backgroundColor:"black",color:"white","&:hover":{border:"2px solid #000",backgroundColor:"white",color:"black"}},onClick:()=>_(s.name),children:"Remove"}),children:e.jsx(W,{primary:s.name})},s.name))})]}),e.jsx(i,{alignItems:"flex-end",sx:{mt:3},children:e.jsx(Q,{type:"submit",className:"button",loading:n.formState.isSubmitting,onClick:m,children:"Save"})})]})})})});return e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs(N,{maxWidth:x.themeStretch?!1:"xl",children:[e.jsx(l,{variant:"h4",children:"Upload Files"}),e.jsx(o,{sx:{mt:5,width:1,height:320,borderRadius:2},children:e.jsx(Y,{methods:n,onSubmit:m,children:I})})]})]})}function Z(){return e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx("title",{children:" Dashboard: Upload Documents"})}),e.jsx(q,{})]})}export{Z as default};
