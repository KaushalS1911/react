import{r,K as F,D as p,d as O,j as e,Q as w,N as T,E as n,T as v,F as E,S as i,G as x,J as G}from"./index-rASeH_eV.js";import{F as R}from"./form-provider-JHl3Tohf.js";import{R as z}from"./rhf-text-field-wwGCjwiN.js";import{G as m,R as _}from"./rhf-autocomplete-gxlXO2Wa.js";import{L as B}from"./LoadingButton-rGoJ8b66.js";function I(){const[d,u]=r.useState(""),[h,f]=r.useState([]),y=F(),j=()=>x.success("Order created"),c=t=>x.error(t),g=sessionStorage.getItem("vendor");r.useEffect(()=>{u(g||""),C()},[]);function C(){p.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/commodity").then(t=>{var o;f((o=t.data)==null?void 0:o.data)})}const S=r.useMemo(()=>({vendor_code:d,commodity:"",quantity:""}),[]),a=O({defaultValues:S}),{handleSubmit:b}=a,l=b(async t=>{const o={...t,vendor_code:d,mode:"test",status:"0"};try{const s=await p.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/create_order",o);s.data.status=="201"?j():s.data.status=="400"&&c(s.data.message)}catch(s){c("Something went wrong"),console.error("Order creation error:",s)}});return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(T,{maxWidth:y.themeStretch?!1:"xl",children:e.jsx(R,{methods:a,onSubmit:l,children:e.jsxs(m,{container:!0,sx:{mt:"30px"},children:[e.jsx(m,{item:!0,md:4,children:e.jsx(n,{sx:{ml:{md:"60px",xs:"0"},mt:"60px"},children:e.jsxs(n,{sx:{mb:"30px",fontWeight:"600",fontSize:"18px"},children:["Create Order",e.jsx(v,{sx:{fontSize:"13px",color:"#637381"},children:"Create Order Input fields"})]})})}),e.jsxs(m,{item:!0,md:8,children:[e.jsx(E,{children:e.jsx(i,{spacing:3,sx:{p:3},children:e.jsx(i,{spacing:1.5,children:e.jsxs(n,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(_,{name:"commodity",type:"commodity",label:"Commodity",placeholder:"Choose Commodity",fullWidth:!0,options:h.map(t=>t==null?void 0:t.commodity_name),getOptionLabel:t=>t}),e.jsx(z,{name:"quantity",label:"Quantity"})]})})})}),e.jsx(i,{alignItems:"flex-end",sx:{mt:3},children:e.jsx(B,{type:"submit",className:"button",loading:a.formState.isSubmitting,onClick:l,children:"Order"})})]})]})})})]})}I.propTypes={currentUser:G.object};export{I as O};
