import{K as _,r,d as R,D as k,j as e,Q as E,N as T,T as d,E as i,G as m,F as w,S as p,O as G,U as O,V,W as A,X as I,H as L}from"./index-rASeH_eV.js";import{F as M}from"./form-provider-JHl3Tohf.js";import{U as N}from"./upload-avatar-N8WOxGjq.js";import"./format-number-w1N-Z0Z4.js";import"./transition-Uc7vb3zK.js";function P(){const u=_(),[h,x]=r.useState(""),[a,n]=r.useState([]),f=()=>m.success("Duments Uploaded"),j=()=>m.error("Failed to Upload"),b=r.useMemo(()=>({doc_type:"",vendor_code:""}),[]),l=R({defaultValues:b}),{handleSubmit:y,control:g}=l,F=sessionStorage.getItem("vendor");r.useEffect(()=>{x(F||"")},[]);const c=y(async o=>{const t=new FormData;t.append("doc_type",o.doc_type),t.append("vendor_code",h),a.forEach(s=>{t.append("file",s)});try{const s=await k.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/upload_document",t,{headers:{"Content-Type":"multipart/form-data"}});s.data.status=="201"?f():j(),console.log("Form submitted successfully:",s.data)}catch(s){console.error("Error submitting form:",s)}}),D=[{label:"Aadhar",key:"aadhar"},{label:"Certificates",key:"certificates"},{label:"Gst Number",key:"gst_number"},{label:"Pan Number",key:"pan_number"}],v=r.useCallback(o=>{n([...a,...o.map(t=>Object.assign(t,{preview:URL.createObjectURL(t)}))])},[a]),C=o=>{const t=a.filter(s=>s!==o);n(t)},U=()=>{n([])},S=e.jsx(e.Fragment,{children:e.jsx(w,{children:e.jsx(p,{spacing:3,sx:{p:3},children:e.jsxs(p,{spacing:1.5,children:[e.jsx(i,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)"},children:e.jsx(G,{name:"doc_type",control:g,render:({field:o})=>e.jsxs(O,{fullWidth:!0,children:[e.jsx(V,{children:"Document Type"}),e.jsx(A,{...o,label:"Document Type",children:D.map(t=>e.jsx(I,{value:t.key,children:t.label},t))})]})})}),e.jsx(d,{variant:"subtitle2",children:"Upload Your Document"}),e.jsx(N,{multiple:!0,thumbnail:!1,files:a,onDrop:v,onRemove:C,onRemoveAll:U,onUpload:c})]})})})});return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs(T,{maxWidth:u.themeStretch?!1:"xl",children:[e.jsx(d,{variant:"h4",children:"Upload Documents"}),e.jsx(i,{sx:{mt:5,width:1,height:320,borderRadius:2},children:e.jsx(M,{methods:l,onSubmit:c,children:S})})]})]})}function Q(){return e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsx("title",{children:" Dashboard: Upload Documents"})}),e.jsx(P,{})]})}export{Q as default};
